<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>最小操作次数使数组元素相等</title>
</head>
<body>
    <!--

        给定一个长度为 n 的 非空 整数数组，每次操作将会使 n - 1 个元素增加 1。找出让数组所有元素相等的最小操作次数。

        示例：

        输入：
        [1,2,3]
        输出：
        3
        解释：
        只需要3次操作（注意每次操作会增加两个元素的值）：
        [1,2,3]  =>  [2,3,3]  =>  [3,4,3]  =>  [4,4,4]

    -->

    <script>
        /**
        * @param {number[]} nums
        * @return {number}
        * 可以解决问题，但是在一些测试用例时超时
        */
        var minMoves = function(nums) {
            const len = nums.length - 1;
            let num = 0;
            let arr = new Set(nums);
            while (arr.size !== 1){
                nums.sort((a,b) => { return a - b });
                for ( let i = 0; i < len; i++ ) {
                    nums[i]++;
                }
                num++;
                arr = new Set(nums);
            }
            return num;
        };
        
        // 一个相对合理的算法，但是在面对极限测试用例的时候，还是会超时。
        var minMoves_01 = function(nums) {
            const len = nums.length - 1;
            if (len === 0 ) return 0;
            let num = 0;
            nums.sort((a,b) => { return a - b });
            while (nums[len] !== nums[0]){ 
                const nowNum = nums[len] - nums[0];
                for ( let i = 0; i < len; i++ ) {
                    nums[i] += nowNum;
                }
                num += nowNum;
                nums.sort((a,b) => { return a - b });
            }
            return num;
        };
        // console.info(minMoves_01(testArr01));
        // 极限测试用例
        const testArr01 = [27,-49,96,-18,-90,-6,-2,92,82,53,-47,-98,-53,-48,-46,55,-86,91,86,38,-40,44,28,-12,-17,45,-78,-66,-63,44,7,65,96,-45,-53,-94,49,-3,50,-17,-98,-97,-62,-50,-45,-8,-95,-79,-65,91,11,-5,-12,-61,83,23,36,57,58,26,2,-35,-9,-50,20,-10,-92,-78,88,58,-43,90,61,-5,-60,68,40,97,41,75,41,-47,-77,-71,-56,58,52,33,16,10,-41,70,27,50,72,-100,-60,80,74,80,38,-69,71,-1,-21,63,-81,-81,61,12,46,-46,17,69,-17,62,28,87,-5,96,-50,54,66,29,-44,38,29,-4,18,-45,-71,-92,-13,-100,7,18,15,-22,37,-72,90,-65,-18,8,-95,17,-78,-15,-43,-31,-19,7,-77,99,-64,-21,-11,18,27,-93,73,56,-85,-88,8,-26,30,76,4,-81,56,-54,-45,-61,6,-88,8,28,-3,65,97,30,-28,72,29,-39,-97,-82,31,-17,77,-44,91,44,-31,-48,70,51,-72,-74,23,84,-28,30,75,79,-6,-16,-41,91,-51,-91,-27,-26,81,-98,35,37,72,-34,-80,1,-26,-89,-55,43,-85,67,-53,-57,93,22,80,-83,-96,7,96,-2,91,-92,-11,93,-83,62,-33,50,16,54,-13,-60,72,-41,41,-54,-77,38,42,-62,5,89,-18,-50,-37,-86,-33,-33,21,-84,65,-35,-76,-94,-42,-59,20,25,91,88,-21,-69,-72,-49,-10,69,-3,13,-41,91,52,16,32,86,66,95,-100,85,-86,-27,-99,79,38,77,37,96,-82,-43,-27,62,-55,4,93,-75,7,-65,46,-95,49,-95,48,-47,-27,-19,-61,-61,-24,91,77,-9,-36,30,-78,55,8,60,51,26,69,77,-60,-85,-19,-67,92,89,-31,39,46,70,-4,-6,-77,70,75,-86,61,-96,-95,38,-5,-79,-31,-31,76,77,-71,-20,-45,99,-43,-4,66,38,-19,58,-21,2,-51,-75,-76,46,-28,-53,16,-53,-39,-23,-49,-82,-84,-2,-60,-63,68,-84,66,49,-4,-79,48,5,-31,-34,96,51,77,-25,-95,-74,-47,-70,72,25,-71,-12,72,-57,18,76,-39,-14,-74,1,23,94,-30,-11,-4,18,-38,96,-76,32,-37,-80,-65,-60,-53,92,-82,0,-78,43,-75,-96,83,50,-53,1,-22,8,87,4,62,-38,-49,-68,51,47,2,66,43,26,-50,58,-2,-63,50,-2,-71,69,98,-96,12,76,-92,-53,-22,-45,49,8,63,36,64,-23,51,-85,9,-46,14,-88,-80,-90,-10,-30,68,41,7,-29,-61,-11,-60,89,-7,4,17,-47,51,47,8,-48,-45,-77,41,72,1,-8,39,62,46,-46,26,19,-84,69,89,84,10,-51,-45,1,-10,-53,-58,83,3,12,88,-93,-89,-4,-89,-81,-29,52,91,24,96,30,-13,43,36,65,-38,52,34,-97,-11,96,-96,-4,-3,-6,-4,-8,-71,99,56,-83,58,67,-35,22,86,37,-26,77,-39,-29,8,0,66,96,-34,80,49,-100,35,-62,97,40,34,-54,86,-70,-10,-84,82,-54,85,-8,-86,-49,-86,52,40,-59,30,53,-36,90,-46,-70,86,-28,62,-13,-28,-3,25,-79,89,-40,-80,76,-58,10,92,-76,9,29,-31,-25,80,-17,-73,20,24,9,-26,88,-1,-20,70,-62,52,32,25,76,82,-49,98,71,-37,70,47,-43,-68,-9,-66,41,-79,3,-84,53,38,96,-74,-37,5,-48,-97,57,32,26,95,-64,-42,20,-88,92,23,62,64,38,32,-37,48,65,7,82,-42,28,-63,-73,-67,75,-77,-41,90,28,11,46,-15,95,-28,-68,-69,-18,5,96,-25,-72,58,-61,19,-57,-46,-33,60,61,-99,70,-59,-62,97,-25,-87,-80,-14,56,1,98,2,38,45,74,23,29,-44,-72,25,31,-92,-65,22,-21,-70,77,46,90,-10,47,13,32,37,10,-93,51,-17,-7,7,36,-57,-91,-74,89,35,49,18,91,77,95,23,38,-70,97,-83,-87,74,16,55,-35,-85,-32,49,53,79,56,-44,-86,-99,15,50,97,-24,76,38,-89,26,-92,-98,-45,-97,-23,93,85,-25,-89,98,-99,27,6,-82,42,74,67,-53,53,23,3,67,-23,-82,-31,-74,-6,-54,64,5,24,72,-40,79,27,37,25,-36,64,36,-85,66,-85,21,84,9,-5,52,57,-99,-73,-40,20,-44,-69,90,-18,25,88,-54,83,12,70,-57,-9,-51,32,-84,-34,-3,4,-19,-37,-29,54,99,81,-99,51,-10,-98,31,2,-25,87,33,-35,-30,-89,-95,-32,46,17,91,89,60,92,-27,29,-42,70,-67,-9,85,-43,97,37,90,99,-12,-20,53,71,34,-72,59,-80,-55,81,83,-50,-99,29,19,92,-30,-20,37,43,-91,47,-34,94,-61,-97,-97,88,40,93,87,81,-75,41,52,12,21,-37,32,67,-56,15,69,-54,-56,-11,90,14,21,27,-91,30,-25,-25,-24,-34,-69,-20,-46,71,-75,-58,4,-97,35,-43,15,-44,-28,-53,75,17,14,45,63,58,86,53,-76,7,-19,-67,89,8,-39,-83,74,-8,-51,-72,-85,-25];
        var minMoves_02 = function(nums) {
            const len = nums.length - 1;
            if (len === 0 ) return 0;
            let num = 0, small = 0, before = 0, after = 0;
            nums.sort((a,b) => { return a - b });
            small = nums[0];
            before = nums[len-1];
            after = nums[len];
            while (small !== after){ 
                const nowNum = after - small;
                num += nowNum;
                small = after;
                before += nowNum;
                after = before;
                before = small;
                console.info(nowNum,small,before,after)
            }
            return num;
        };
        // console.info(minMoves_02([1,1000000000]));
        // console.info(minMoves(testArr01));
        console.info(minMoves_02([5,6,8,8,5]));
        console.info(minMoves_02(testArr01));

        var minMoves_03 = function(nums) {
            // nums.sort((a,b)=>a-b)
            //排序更耗时不如直接取最小
            let min = Math.min(...nums)
            let sum = 0;
            for(let i = 0; i < nums.length; i++ ){
                sum += nums[i] - min;
            }
            return sum
        };
        
        console.info(minMoves_03(testArr01));
    </script>
</body>
</html>